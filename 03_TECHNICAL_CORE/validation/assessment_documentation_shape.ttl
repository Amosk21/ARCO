@prefix sh:  <http://www.w3.org/ns/shacl#> .
@prefix :    <https://arco.ai/ontology/core#> .
@prefix iao: <http://purl.obolibrary.org/obo/IAO_> .
@prefix ro:  <http://purl.obolibrary.org/obo/RO_> .
@prefix bfo: <http://purl.obolibrary.org/obo/BFO_> .
@prefix cco: <http://www.ontologyrepository.com/CommonCoreOntologies/> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

#################################################################
# ARCO SHACL Validation Shapes
# 
# Purpose: Validate structural completeness of assessment artifacts
# Note: These shapes validate AFTER OWL reasoning has run
#################################################################

#################################################################
# Shape 1: AssessmentDocumentation must reference SOMETHING
#          (relaxed - just checks the link exists, not the type)
#################################################################

:AssessmentDocumentationShape
  a sh:NodeShape ;
  sh:targetClass :AssessmentDocumentation ;
  sh:message "AssessmentDocumentation must have at least one iao:0000136 (is_about) link." ;

  sh:property [
    sh:path iao:0000136 ;
    sh:minCount 1 ;
    sh:message "AssessmentDocumentation must be about at least one thing." ;
  ] .

#################################################################
# Shape 2: AssessmentDocumentationProcess must have participants
#          and produce output
#################################################################

:AssessmentDocumentationProcessShape
  a sh:NodeShape ;
  sh:targetClass :AssessmentDocumentationProcess ;

  # must have at least one participant
  sh:property [
    sh:path ro:0000057 ;
    sh:minCount 1 ;
    sh:message "AssessmentDocumentationProcess must have at least one participant." ;
  ] ;

  # must output at least one thing
  sh:property [
    sh:path cco:has_output ;
    sh:minCount 1 ;
    sh:message "AssessmentDocumentationProcess must have at least one output." ;
  ] .

#################################################################
# Shape 3: ProviderRole must inhere in something
#################################################################

:ProviderRoleShape
  a sh:NodeShape ;
  sh:targetClass :ProviderRole ;

  sh:property [
    sh:path ro:0000052 ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
    sh:message "ProviderRole must inhere in exactly one entity." ;
  ] .

#################################################################
# Shape 4: System must bear at least one disposition
#################################################################

:SystemShape
  a sh:NodeShape ;
  sh:targetClass :System ;

  sh:property [
    sh:path ro:0000053 ;
    sh:minCount 1 ;
    sh:message "System must bear at least one disposition (capability)." ;
  ] .

#################################################################
# Shape 5: ComplianceDetermination must be about something
#################################################################

:ComplianceDeterminationShape
  a sh:NodeShape ;
  sh:targetClass :ComplianceDetermination ;

  sh:property [
    sh:path iao:0000136 ;
    sh:minCount 1 ;
    sh:message "ComplianceDetermination must be about at least one thing." ;
  ] .
